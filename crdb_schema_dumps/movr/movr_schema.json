[
  {
    "name": "movr.promo_codes",
    "type": "TABLE",
    "ddl": "CREATE TABLE public.promo_codes (\n\tcode VARCHAR NOT NULL,\n\tdescription VARCHAR NULL,\n\tcreation_time TIMESTAMP NULL,\n\texpiration_time TIMESTAMP NULL,\n\trules JSONB NULL,\n\tCONSTRAINT promo_codes_pkey PRIMARY KEY (code ASC)\n);"
  },
  {
    "name": "movr.rides",
    "type": "TABLE",
    "ddl": "CREATE TABLE public.rides (\n\tid UUID NOT NULL,\n\tcity VARCHAR NOT NULL,\n\tvehicle_city VARCHAR NULL,\n\trider_id UUID NULL,\n\tvehicle_id UUID NULL,\n\tstart_address VARCHAR NULL,\n\tend_address VARCHAR NULL,\n\tstart_time TIMESTAMP NULL,\n\tend_time TIMESTAMP NULL,\n\trevenue DECIMAL(10,2) NULL,\n\tCONSTRAINT rides_pkey PRIMARY KEY (city ASC, id ASC),\n\tCONSTRAINT rides_city_rider_id_fkey FOREIGN KEY (city, rider_id) REFERENCES public.users(city, id),\n\tCONSTRAINT rides_vehicle_city_vehicle_id_fkey FOREIGN KEY (vehicle_city, vehicle_id) REFERENCES public.vehicles(city, id),\n\tINDEX rides_auto_index_fk_city_ref_users (city ASC, rider_id ASC),\n\tINDEX rides_auto_index_fk_vehicle_city_ref_vehicles (vehicle_city ASC, vehicle_id ASC),\n\tCONSTRAINT check_vehicle_city_city CHECK (vehicle_city = city)\n);"
  },
  {
    "name": "movr.user_promo_codes",
    "type": "TABLE",
    "ddl": "CREATE TABLE public.user_promo_codes (\n\tcity VARCHAR NOT NULL,\n\tuser_id UUID NOT NULL,\n\tcode VARCHAR NOT NULL,\n\t\"timestamp\" TIMESTAMP NULL,\n\tusage_count INT8 NULL,\n\tCONSTRAINT user_promo_codes_pkey PRIMARY KEY (city ASC, user_id ASC, code ASC),\n\tCONSTRAINT user_promo_codes_city_user_id_fkey FOREIGN KEY (city, user_id) REFERENCES public.users(city, id)\n);"
  },
  {
    "name": "movr.users",
    "type": "TABLE",
    "ddl": "CREATE TABLE public.users (\n\tid UUID NOT NULL,\n\tcity VARCHAR NOT NULL,\n\tname VARCHAR NULL,\n\taddress VARCHAR NULL,\n\tcredit_card VARCHAR NULL,\n\tCONSTRAINT users_pkey PRIMARY KEY (city ASC, id ASC)\n);"
  },
  {
    "name": "movr.vehicle_location_histories",
    "type": "TABLE",
    "ddl": "CREATE TABLE public.vehicle_location_histories (\n\tcity VARCHAR NOT NULL,\n\tride_id UUID NOT NULL,\n\t\"timestamp\" TIMESTAMP NOT NULL,\n\tlat FLOAT8 NULL,\n\tlong FLOAT8 NULL,\n\tCONSTRAINT vehicle_location_histories_pkey PRIMARY KEY (city ASC, ride_id ASC, \"timestamp\" ASC),\n\tCONSTRAINT vehicle_location_histories_city_ride_id_fkey FOREIGN KEY (city, ride_id) REFERENCES public.rides(city, id)\n);"
  },
  {
    "name": "movr.vehicles",
    "type": "TABLE",
    "ddl": "CREATE TABLE public.vehicles (\n\tid UUID NOT NULL,\n\tcity VARCHAR NOT NULL,\n\ttype VARCHAR NULL,\n\towner_id UUID NULL,\n\tcreation_time TIMESTAMP NULL,\n\tstatus VARCHAR NULL,\n\tcurrent_location VARCHAR NULL,\n\text JSONB NULL,\n\tCONSTRAINT vehicles_pkey PRIMARY KEY (city ASC, id ASC),\n\tCONSTRAINT vehicles_city_owner_id_fkey FOREIGN KEY (city, owner_id) REFERENCES public.users(city, id),\n\tINDEX vehicles_auto_index_fk_city_ref_users (city ASC, owner_id ASC)\n);"
  }
]